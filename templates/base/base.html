{% load static %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#10b981">
    <link rel="manifest" href="/static/manifest.json">
    <link rel="icon" href="/static/icons/icon-192.svg">
    <link rel="apple-touch-icon" href="/static/icons/icon-192.svg">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Vazirmatn', 'Inter', 'system-ui', '-apple-system', 'sans-serif'],
                        display: ['Space Grotesk', 'Vazirmatn', 'Inter', 'system-ui'],
                    },
                    colors: {
                        accent: '#22d3ee',
                        emerald: '#10b981',
                        night: '#0b1224',
                    },
                },
            },
        };
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/static/service-worker.js');
            });
        }
    </script>
    <style type="text/tailwindcss">
        @layer base {
            * { @apply box-border; }
            body {
                @apply min-h-screen bg-slate-950 text-slate-100 font-sans antialiased relative overflow-x-hidden;
                background: radial-gradient(circle at 20% 20%, rgba(16,185,129,0.08), transparent 25%),
                            radial-gradient(circle at 80% 0%, rgba(59,130,246,0.12), transparent 28%),
                            #020617;
            }
            main { @apply relative pt-12 pb-16; }
            h1 { @apply text-2xl sm:text-3xl font-black tracking-tight font-display mb-2; }
            h2 { @apply text-xl sm:text-2xl font-bold font-display; }
            label { @apply block text-sm font-semibold text-slate-200 mb-2; }
            input, select {
                @apply w-full rounded-2xl bg-white/5 border border-white/10 px-4 py-3 text-slate-100
                shadow-[0_12px_50px_rgba(0,0,0,0.35)] transition duration-200
                focus:outline-none focus:ring-2 focus:ring-emerald/70 focus:border-emerald/60;
            }
        }

        @layer components {
            .page-shell { @apply max-w-6xl mx-auto px-4 sm:px-8; }
            .nav { @apply flex items-center justify-between gap-3 py-4; }
            .brand { @apply flex items-center gap-3 font-display text-lg sm:text-xl font-semibold text-white no-underline; }
            .brand-mark { @apply w-10 h-10 rounded-2xl bg-gradient-to-br from-emerald-400 to-sky-500 grid place-items-center shadow-[0_15px_40px_rgba(16,185,129,0.35)]; }
            .brand-title { @apply leading-tight; }
            nav a { @apply text-slate-200 font-medium inline-flex items-center gap-1.5 px-3 py-2 rounded-xl bg-white/5 border border-white/10 transition hover:-translate-y-[1px] hover:text-white hover:border-emerald/50; }
            .cta-link { @apply bg-gradient-to-r from-emerald-400 via-cyan-400 to-sky-500 text-slate-950 font-bold shadow-[0_15px_50px_rgba(34,211,238,0.35)]; }

            .panel {
                @apply rounded-[28px] border border-white/10 bg-white/5 backdrop-blur-xl
                shadow-[0_25px_120px_rgba(0,0,0,0.55)] p-6 sm:p-8 relative overflow-hidden;
            }
            .panel::before {
                content: '';
                position: absolute;
                inset: -40% 10% auto auto;
                width: 220px;
                height: 220px;
                background: radial-gradient(circle, rgba(34,211,238,0.16), transparent 40%);
                filter: blur(18px);
                opacity: .8;
                z-index: 0;
            }
            .panel > * { position: relative; z-index: 1; }

            .hero-card { @apply flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between; }
            .hero-text { @apply max-w-2xl space-y-2; }
            .muted { @apply text-slate-400 leading-relaxed; }
            .chip { @apply inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-sm font-semibold bg-white/10 border border-white/15; }
            .chip-glow { @apply bg-gradient-to-r from-emerald-400/20 via-cyan-400/25 to-sky-500/30 border-emerald/30 text-emerald-100; }
            .chip-ghost { @apply bg-white/5 text-slate-200 border-white/10; }

            .stack { @apply grid gap-5; }
            .pill-actions { @apply flex flex-wrap items-center gap-3; }

            .btn { @apply inline-flex items-center justify-center gap-2 rounded-2xl px-5 py-3 font-semibold text-slate-950
                bg-gradient-to-r from-emerald-400 via-cyan-400 to-sky-500 shadow-[0_15px_45px_rgba(34,211,238,0.35)]
                transition hover:-translate-y-[2px] hover:shadow-[0_18px_55px_rgba(34,211,238,0.45)] no-underline; }
            .btn-secondary { @apply text-emerald-100 bg-white/10 border border-white/15 shadow-none; }
            .btn-danger { @apply text-rose-50 bg-gradient-to-r from-rose-500/70 to-rose-600/80 border border-rose-400/60 shadow-[0_10px_30px_rgba(244,63,94,0.35)]; }
            .btn-ghost { @apply text-white bg-transparent border border-white/10 shadow-none; }

            .stat-grid { @apply grid gap-4 [grid-template-columns:repeat(auto-fit,minmax(220px,1fr))]; }
            .stat-card { @apply rounded-2xl border border-white/10 bg-white/5 p-4 space-y-2 shadow-inner shadow-slate-900/50; }
            .stat-value { @apply text-3xl font-black font-display text-white; }

            .card-grid { @apply grid gap-4 [grid-template-columns:repeat(auto-fit,minmax(240px,1fr))]; }
            .card { @apply rounded-2xl border border-white/10 bg-slate-900/50 p-5 space-y-3 shadow-[0_18px_50px_rgba(0,0,0,0.35)]; }

            .table-container { @apply w-full overflow-x-auto rounded-2xl border border-white/10 bg-slate-900/70 shadow-[0_18px_60px_rgba(0,0,0,0.45)]; }
            table { @apply w-full border-collapse min-w-[520px]; }
            table thead { @apply bg-gradient-to-r from-white/5 via-emerald/10 to-white/5; }
            table th { @apply text-left text-slate-200 font-semibold px-4 py-3 border-b border-white/10; }
            table td { @apply px-4 py-3 text-slate-100 border-b border-white/5 align-top; }
            table tr:last-child td { @apply border-b-0; }
            table tbody tr:hover { @apply bg-white/5; }

            .badge { @apply inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-sm border border-white/15 bg-white/10; }
            .badge-success { @apply text-emerald-100 border-emerald/40 bg-emerald-500/10; }
            .badge-danger { @apply text-rose-100 border-rose-400/40 bg-rose-500/10; }
            .badge-info { @apply text-sky-100 border-sky-400/40 bg-sky-500/10; }

            .form-grid { @apply grid gap-4 [grid-template-columns:repeat(auto-fit,minmax(240px,1fr))]; }
            .messages { @apply list-none p-0 m-0 mb-5 grid gap-2; }
            .messages li { @apply px-4 py-3 rounded-xl border border-white/10 bg-white/10 text-sm; }
            .messages .success { @apply bg-emerald-500/10 text-emerald-50 border-emerald/40; }
            .messages .error { @apply bg-rose-500/10 text-rose-50 border-rose-400/40; }

            .info-strip { @apply flex flex-wrap items-center gap-3 text-sm text-slate-300; }
            .soft-divider { @apply border-t border-white/10 my-4; }
            .note { @apply text-xs text-slate-400; }

            .glow-ring {
                position: absolute;
                inset: auto -80px -80px auto;
                width: 360px;
                height: 360px;
                background: radial-gradient(circle, rgba(34,211,238,0.16), transparent 45%);
                filter: blur(24px);
                opacity: 0.9;
                z-index: 0;
            }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-6px); }
            100% { transform: translateY(0px); }
        }
        .floating { animation: float 5s ease-in-out infinite; }
    </style>
    <title>{% block title %}Smart Door Control{% endblock %}</title>
</head>
<body>
    <div class="pointer-events-none absolute inset-0 z-0 overflow-hidden">
        <div class="absolute -left-24 top-10 w-72 h-72 bg-gradient-to-br from-emerald-500/20 via-cyan-500/16 to-transparent blur-3xl"></div>
        <div class="absolute right-0 top-1/3 w-64 h-64 bg-gradient-to-br from-sky-500/20 via-blue-400/16 to-transparent blur-3xl"></div>
        <div class="absolute left-1/2 bottom-0 -translate-x-1/2 w-[720px] h-48 bg-[radial-gradient(circle_at_center,#0ea5e980,transparent_60%)] blur-3xl"></div>
    </div>
    <header class="sticky top-0 z-20 backdrop-blur-xl bg-slate-950/70 border-b border-white/10">
        <div class="page-shell nav">
            <a class="brand" href="/">
                <span class="brand-mark floating">
                    <svg class="w-6 h-6 text-slate-950" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 3L4 8v8l8 5 8-5V8l-8-5z" stroke="currentColor" stroke-width="1.5" fill="currentColor" class="text-white"/>
                        <path d="M9 12.5l2 2 4-4" stroke="#0ea5e9" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </span>
                <span class="brand-title">
                    SmartDoorControl
                    <span class="block text-xs text-emerald-200 font-normal">دسترسی ایمن و هوشمند</span>
                </span>
            </a>
            <nav class="flex items-center gap-2">
                {% if user.is_authenticated %}
                    <a href="{% url 'access:member_panel' %}">کنترل درب</a>
                    {% if user.is_head %}
                        <a href="{% url 'households:head_dashboard' %}">داشبورد</a>
                        <a href="{% url 'households:member_list' %}">اعضا</a>
                        <a href="{% url 'access:access_logs' %}">گزارش‌ها</a>
                        <a href="{% url 'devices:device_logs' %}">لاگ دستگاه</a>
                    {% endif %}
                    <a class="cta-link" href="{% url 'accounts:logout' %}">خروج</a>
                {% else %}
                    <a class="cta-link" href="{% url 'accounts:login' %}">ورود</a>
                {% endif %}
            </nav>
        </div>
    </header>

    <main>
        <div class="page-shell space-y-6">
            <section class="panel hero-card">
                <div class="hero-text">
                    <p class="chip chip-glow">کنترل هوشمند ورودی</p>
                    <h1>درِ ساختمان را با آرامش و امنیت مدیریت کنید</h1>
                    <p class="muted">رابط کاربری جدید SmartDoorControl با تمرکز بر وضوح، انیمیشن‌های نرم و رنگ‌های مدرن طراحی شده است تا هر کنترل و گزارشی را سریع و لذت‌بخش کند.</p>
                    <div class="info-strip">
                        <span class="chip chip-ghost">پاسخ‌گویی لحظه‌ای</span>
                        <span class="chip chip-ghost">امنیت لایه‌ای</span>
                        <span class="chip chip-ghost">طراحی ریسپانسیو</span>
                    </div>
                </div>
                <div class="rounded-3xl bg-gradient-to-b from-white/10 to-white/5 p-5 border border-white/10 shadow-inner shadow-emerald-500/10 w-full sm:w-72 space-y-3">
                    <p class="text-sm text-emerald-100 font-semibold">وضعیت کاربر</p>
                    <div class="text-lg font-bold">{% if user.is_authenticated %}{{ user.username }}{% else %}مهمان{% endif %}</div>
                    <div class="muted text-sm">ورود شما امن و رمزگذاری‌شده است. از کنترل سریع درب یا مشاهده گزارش‌ها استفاده کنید.</div>
                </div>
            </section>

            <section class="panel">
                {% if messages %}
                    <ul class="messages">
                        {% for message in messages %}
                            <li class="{{ message.tags }}">{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
                {% block content %}{% endblock %}
            </section>
        </div>
    </main>
</body>
</html>
