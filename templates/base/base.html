{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#0ea5e9">
    <link rel="manifest" href="/static/manifest.json">
    <link rel="icon" href="/static/icons/icon-192.svg">
    <link rel="apple-touch-icon" href="/static/icons/icon-192.svg">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'system-ui', '-apple-system', 'sans-serif'] },
                    colors: {
                        accent: '#22d3ee',
                        'accent-strong': '#0ea5e9',
                    },
                },
            },
        };
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/static/service-worker.js');
            });
        }
    </script>
    <style type="text/tailwindcss">
        @layer base {
            * { @apply box-border; }
            body {
                @apply min-h-screen text-slate-100 font-sans;
                background: radial-gradient(circle at 20% 20%, rgba(34,211,238,0.08), transparent 25%),
                            radial-gradient(circle at 80% 0%, rgba(14,165,233,0.12), transparent 30%),
                            #0f172a;
            }
            main { @apply px-4 sm:px-6 py-6 pb-9; }
            h1 { @apply font-semibold tracking-tight mb-4; font-size: clamp(1.25rem, 2vw + 1rem, 1.6rem); }
            form { @apply grid gap-4; }
            label { @apply block font-semibold mb-1; }
            input, select { @apply w-full rounded-xl border border-slate-800 bg-white/5 px-3 py-2.5 text-slate-200 shadow-inner focus:outline-none focus:ring-2 focus:ring-sky-500/60 focus:border-sky-500/60; }
            header { @apply sticky top-0 z-10 bg-slate-900/70 backdrop-blur border-b border-slate-800; }
        }

        @layer components {
            .nav { @apply flex justify-between items-center max-w-5xl mx-auto px-5 py-4 gap-3; }
            .brand { @apply flex items-center gap-2 font-bold text-[1.05rem] text-slate-200 no-underline; }
            .brand-dot { @apply w-3 h-3 rounded-full shadow-[0_0_14px_rgba(34,211,238,0.6)]; background: linear-gradient(135deg, #22d3ee, #0ea5e9); }
            nav { @apply flex items-center ml-auto gap-2; }
            nav a { @apply text-slate-300 inline-flex items-center px-3 py-2 font-medium transition ease-in-out duration-150 rounded-lg; min-height: 2.5rem; }
            nav a:hover { @apply text-white -translate-y-px bg-white/5; }
            .nav-toggle { @apply hidden items-center justify-center rounded-xl border border-slate-800 bg-white/5 text-slate-200 h-10 w-10 transition; }
            .nav-toggle:hover { @apply bg-white/10; }
            .nav-toggle-bar { @apply block h-[2px] w-6 rounded-full bg-slate-200 my-[3px]; }
            .container { @apply max-w-5xl mx-auto px-1; }
            .panel { @apply rounded-2xl border border-slate-800 p-7 shadow-[0_20px_50px_rgba(0,0,0,0.35)] bg-gradient-to-b from-white/5 to-transparent; }
            .muted { @apply text-slate-400; }
            .stack { @apply grid gap-4; }
            .btn { @apply inline-flex items-center gap-2 px-4 py-2.5 rounded-xl font-bold text-slate-900 bg-gradient-to-br from-accent to-accent-strong shadow-[0_12px_30px_rgba(14,165,233,0.35)] transition ease-in-out duration-150 no-underline; }
            .btn:hover { @apply -translate-y-px; box-shadow: 0 18px 35px rgba(14,165,233,0.45); }
            .btn-secondary { @apply bg-white/10 text-slate-100 shadow-none; }
            .btn-danger { @apply bg-rose-500/10 text-rose-100 shadow-none border border-rose-500/40; }
            .btn-ghost { @apply bg-transparent text-slate-300 shadow-none; }
            .pill-actions { @apply flex items-center gap-2 flex-wrap; }
            .stat-grid { @apply grid gap-4 [grid-template-columns:repeat(auto-fit,minmax(220px,1fr))] mt-5; }
            .stat-card { @apply bg-white/5 border border-slate-800 rounded-xl p-4 grid gap-1; }
            .stat-value { @apply text-2xl font-bold; }
            .table-actions { @apply flex gap-2 items-center; }
            .table-container { @apply w-full overflow-x-auto border border-slate-800 rounded-xl bg-slate-900 mt-4; }
            table { @apply w-full border-collapse min-w-[520px]; }
            table th, table td { @apply px-3.5 py-3 text-left border-b border-slate-800; }
            table th { @apply bg-white/5 text-slate-300 font-semibold; }
            table tr:last-child td { @apply border-b-0; }
            table tbody tr:hover { @apply bg-slate-800/30; }
            .badge { @apply inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-sm border border-slate-800 bg-white/5; }
            .badge-success { @apply text-green-200 border-green-500/40; }
            .badge-danger { @apply text-rose-200 border-rose-500/40; }
            .form-grid { @apply grid gap-4 [grid-template-columns:repeat(auto-fit,minmax(240px,1fr))]; }
            .messages { @apply list-none p-0 m-0 mb-4 grid gap-2; }
            .messages li { @apply px-3.5 py-3 rounded-xl border border-slate-800 bg-white/5; }
            .messages .success { @apply bg-green-500/10 text-green-200 border-green-500/40; }
            .messages .error { @apply bg-rose-500/10 text-rose-200 border-rose-500/40; }
            .subtle-card { @apply bg-white/5 border border-slate-800 rounded-xl p-4 grid gap-2; }
            .input-error { @apply border-rose-500/70 ring-2 ring-rose-400/40; }
            .scroll-shadow { box-shadow: inset 8px 0 10px -10px rgba(0,0,0,0.35); }
        }

        /* ðŸ“± Ù…ÙˆØ¨Ø§ÛŒÙ„: <=576px */
        @media (max-width: 576px) {
            .nav { @apply flex-wrap gap-2; }
            nav { display: none; width: 100%; flex-direction: column; gap: 6px; padding-top: 6px; }
            nav.nav-open { display: flex; }
            nav a { @apply w-full bg-slate-800/50 justify-between; }
            .nav-toggle { @apply inline-flex ml-auto; }
            .panel { @apply p-4; }
            .pill-actions { @apply w-full flex-col items-stretch; }
            .btn { @apply w-full justify-center; }
            form .pill-actions { @apply flex-col items-stretch; }
            .table-container { @apply rounded-lg; }
            table { @apply min-w-full; }
        }

        /* ðŸ“² ØªØ¨Ù„Øª: 577px - 992px */
        @media (min-width: 577px) and (max-width: 992px) {
            .nav { @apply flex-wrap; }
            nav { @apply w-full justify-end; }
            nav a { @apply bg-transparent; }
            .panel { @apply p-6; }
            .pill-actions { @apply flex-wrap gap-2; }
        }

        /* ðŸ’» Ø¯Ø³Ú©ØªØ§Ù¾: >=993px */
        @media (min-width: 993px) {
            .nav-toggle { display: none; }
            nav { @apply flex; }
            .pill-actions { @apply flex-row; }
        }
    </style>
    <title>{% block title %}Smart Door Control{% endblock %}</title>
</head>
<body class="bg-[#0f172a]">
<header>
    <div class="nav">
        <a class="brand" href="/">
            <span class="brand-dot"></span>
            SmartDoorControl
        </a>
        <button class="nav-toggle" type="button" aria-label="Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù…Ù†Ùˆ" aria-expanded="false" data-nav-toggle>
            <span class="nav-toggle-bar"></span>
            <span class="nav-toggle-bar"></span>
            <span class="nav-toggle-bar"></span>
        </button>
        <nav class="nav-links">
            {% if user.is_authenticated %}
                <a href="{% url 'access:member_panel' %}">Ú©Ù†ØªØ±Ù„ Ø¯Ø±Ø¨</a>
                {% if user.is_head %}
                    <a href="{% url 'households:head_dashboard' %}">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a>
                    <a href="{% url 'households:member_list' %}">Ø§Ø¹Ø¶Ø§</a>
                    <a href="{% url 'access:access_logs' %}">Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</a>
                    <a href="{% url 'devices:device_logs' %}">Ù„Ø§Ú¯ Ø¯Ø³ØªÚ¯Ø§Ù‡</a>
                {% endif %}
                <a href="{% url 'accounts:logout' %}">Ø®Ø±ÙˆØ¬</a>
            {% else %}
                <a href="{% url 'accounts:login' %}">ÙˆØ±ÙˆØ¯</a>
            {% endif %}
        </nav>
    </div>
</header>
<main>
    <div class="container">
        <div class="panel">
            {% if messages %}
                <ul class="messages">
                    {% for message in messages %}
                        <li class="{{ message.tags }}">{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
            {% block content %}{% endblock %}
        </div>
    </div>
</main>
<script type="module" src="{% static 'js/main.js' %}"></script>
</body>
</html>
